##Fabric configurator

Utility to create channels and deploy/update chaincodes.

###Build
    gradle shadowJar

###Requirements
For some methods configtxlator web service is required to be running on localhost:7059. 

    configtxlator start
    
Path of congitxlator can be overridden with parameter --configtxlator (ex. --configtxlator http://192.168.0.1:7059)

###Run Example
    java -jar build/libs/fabric-configurator-fat.jar --type upgrade --config network/fabric-devnet.yaml

Types of operations supported by the configurator:

- **config** - create channels and deploy chaincodes using fabric.yaml
    - `%jar% --type=config --config=network/fabric-devnet.yaml`
        - *config* - fabric.yaml configuration
- **deploy** - deploy chaincode
    - `%jar% --type=deploy --name=mychaincode`
        - *name* - chaincode name
- **update** - update chaincode
    - `%jar% --type=update --name=mychaincode`
        - *name* - chaincode name
- **enroll** - enroll users to fabric 
    - `%jar% --type=enroll --ca_key=ca.luxoft.com`
        - *ca_key* - CA, in which enroll users
- **signupdate** - sign update proto file using user`s keys.
    - `%jar% --type=signupdate --admin=username --src=src.bin --dest=out.bin`
        - *admin* - name of user described in fabric.yaml
        - *src* - src proto file path
        - *dest* (optional) - destination file path, defaults to _src_.sign    
- **setchannel** - apply new channel configuration.
    - `%jar% --type=setchannel --channel=channelName --src=src.bin --signature=sing.bin`
        - *channel* - target channel name
        - *src* - src proto file path
        - *signature* (multiple) - user signature of _src_, required amount depends on channel admin policy
- **addanchor** - creates channel update, which adds anchor peers.
    - `%jar% --type=addanchor --src=src.bin --dest=out.bin`
        - *src* - src file path to anchor envelope pb file (generated by configtxgen)
        - *dest* (optional) - destination file path, defaults to _src_.update.bin
        
Configtxlator required:
- **getchannel** - get fabric channel configuration json
    - `%jar% --type=getchannel --channel=channelName --dest=out.json`
        - *channelName* - target channel name
        - *dest* (optional) - destination file path, defaults to _channelName_.json
- **updatechannel** - get fabric channel update proto file, which contains changes between src json file and current channel configuration.
    - `%jar% --type=updatechannel --channel=channelName --src=src.json --dest=out.bin`
        - *channelName* - target channel name
        - *src* - src json file path
        - *dest* (optional) - destination file path, defaults to _channelName_.update.bin
- **addcompany** - creates channel update, which adds company.
    - `%jar% --type=addcompany --channel=channelName --src=src.bin --company=companyName --dest=out.bin`
        - *channel* - target channel name
        - *src* - src file path to companyConfigGroup json file
        - *company* - added company name
        - *dest* (optional) - destination file path, defaults to _src_.update.bin
- **appsingleadmin** - creates channel update, which sets specific company(or first) as channel admin.
    - `%jar% --type=appsingleadmin --src=src.bin --channel=channelName --company=companyName --dest=out.bin`
        - *channel* - target channel name
        - *src* - src file path to anchor envelope pb file
        - *company* (optional) - company name to become admin
        - *dest* (optional) - destination file path, defaults to _src_.update.bin
